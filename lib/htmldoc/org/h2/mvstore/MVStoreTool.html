<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_80) on Sat Jun 10 15:04:04 CEST 2017 -->
<title>MVStoreTool</title>
<meta name="date" content="2017-06-10">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MVStoreTool";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/h2/mvstore/MVStore.Builder.html" title="class in org.h2.mvstore"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/h2/mvstore/OffHeapStore.html" title="class in org.h2.mvstore"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/h2/mvstore/MVStoreTool.html" target="_top">Frames</a></li>
<li><a href="MVStoreTool.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.h2.mvstore</div>
<h2 title="Class MVStoreTool" class="title">Class MVStoreTool</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.h2.mvstore.MVStoreTool</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">MVStoreTool</span>
extends java.lang.Object</pre>
<div class="block">Utility methods used in combination with the MVStore.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#MVStoreTool()">MVStoreTool</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#compact(org.h2.mvstore.MVStore,%20org.h2.mvstore.MVStore)">compact</a></strong>(<a href="../../../org/h2/mvstore/MVStore.html" title="class in org.h2.mvstore">MVStore</a>&nbsp;source,
       <a href="../../../org/h2/mvstore/MVStore.html" title="class in org.h2.mvstore">MVStore</a>&nbsp;target)</code>
<div class="block">Copy all live pages from the source store to the target store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#compact(java.lang.String,%20boolean)">compact</a></strong>(java.lang.String&nbsp;fileName,
       boolean&nbsp;compress)</code>
<div class="block">Compress the store by creating a new file and copying the live pages
 there.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#compact(java.lang.String,%20java.lang.String,%20boolean)">compact</a></strong>(java.lang.String&nbsp;sourceFileName,
       java.lang.String&nbsp;targetFileName,
       boolean&nbsp;compress)</code>
<div class="block">Copy all live pages from the source store to the target store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#compactCleanUp(java.lang.String)">compactCleanUp</a></strong>(java.lang.String&nbsp;fileName)</code>
<div class="block">Clean up if needed, in a case a compact operation was interrupted due to
 killing the process or a power failure.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#dump(java.lang.String,%20boolean)">dump</a></strong>(java.lang.String&nbsp;fileName,
    boolean&nbsp;details)</code>
<div class="block">Read the contents of the file and write them to system out.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#dump(java.lang.String,%20java.io.Writer,%20boolean)">dump</a></strong>(java.lang.String&nbsp;fileName,
    java.io.Writer&nbsp;writer,
    boolean&nbsp;details)</code>
<div class="block">Read the contents of the file and display them in a human-readable
 format.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#info(java.lang.String)">info</a></strong>(java.lang.String&nbsp;fileName)</code>
<div class="block">Read the summary information of the file and write them to system out.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#info(java.lang.String,%20java.io.Writer)">info</a></strong>(java.lang.String&nbsp;fileName,
    java.io.Writer&nbsp;writer)</code>
<div class="block">Read the summary information of the file and write them to system out.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#main(java.lang.String...)">main</a></strong>(java.lang.String...&nbsp;args)</code>
<div class="block">Runs this tool.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#repair(java.lang.String)">repair</a></strong>(java.lang.String&nbsp;fileName)</code>
<div class="block">Repair a store by rolling back to the newest good version.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../org/h2/mvstore/MVStoreTool.html#rollback(java.lang.String,%20long,%20java.io.Writer)">rollback</a></strong>(java.lang.String&nbsp;fileName,
        long&nbsp;targetVersion,
        java.io.Writer&nbsp;writer)</code>
<div class="block">Roll back to a given revision into a a file called *.temp.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MVStoreTool()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MVStoreTool</h4>
<pre>public&nbsp;MVStoreTool()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="main(java.lang.String...)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String...&nbsp;args)</pre>
<div class="block">Runs this tool.
 Options are case sensitive. Supported options are:
 <table summary="command line options">
 <tr><td>[-dump &lt;fileName&gt;]</td>
 <td>Dump the contends of the file</td></tr>
 <tr><td>[-info &lt;fileName&gt;]</td>
 <td>Get summary information about a file</td></tr>
 <tr><td>[-compact &lt;fileName&gt;]</td>
 <td>Compact a store</td></tr>
 <tr><td>[-compress &lt;fileName&gt;]</td>
 <td>Compact a store with compression enabled</td></tr>
 </table></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>args</code> - the command line arguments</dd></dl>
</li>
</ul>
<a name="dump(java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dump</h4>
<pre>public static&nbsp;void&nbsp;dump(java.lang.String&nbsp;fileName,
        boolean&nbsp;details)</pre>
<div class="block">Read the contents of the file and write them to system out.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fileName</code> - the name of the file</dd><dd><code>details</code> - whether to print details</dd></dl>
</li>
</ul>
<a name="info(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>info</h4>
<pre>public static&nbsp;void&nbsp;info(java.lang.String&nbsp;fileName)</pre>
<div class="block">Read the summary information of the file and write them to system out.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fileName</code> - the name of the file</dd></dl>
</li>
</ul>
<a name="dump(java.lang.String, java.io.Writer, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dump</h4>
<pre>public static&nbsp;void&nbsp;dump(java.lang.String&nbsp;fileName,
        java.io.Writer&nbsp;writer,
        boolean&nbsp;details)</pre>
<div class="block">Read the contents of the file and display them in a human-readable
 format.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fileName</code> - the name of the file</dd><dd><code>writer</code> - the print writer</dd><dd><code>details</code> - print the page details</dd></dl>
</li>
</ul>
<a name="info(java.lang.String, java.io.Writer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>info</h4>
<pre>public static&nbsp;java.lang.String&nbsp;info(java.lang.String&nbsp;fileName,
                    java.io.Writer&nbsp;writer)</pre>
<div class="block">Read the summary information of the file and write them to system out.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fileName</code> - the name of the file</dd><dd><code>writer</code> - the print writer</dd>
<dt><span class="strong">Returns:</span></dt><dd>null if successful (if there was no error), otherwise the error
         message</dd></dl>
</li>
</ul>
<a name="compact(java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compact</h4>
<pre>public static&nbsp;void&nbsp;compact(java.lang.String&nbsp;fileName,
           boolean&nbsp;compress)</pre>
<div class="block">Compress the store by creating a new file and copying the live pages
 there. Temporarily, a file with the suffix ".tempFile" is created. This
 file is then renamed, replacing the original file, if possible. If not,
 the new file is renamed to ".newFile", then the old file is removed, and
 the new file is renamed. This might be interrupted, so it's better to
 compactCleanUp before opening a store, in case this method was used.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fileName</code> - the file name</dd><dd><code>compress</code> - whether to compress the data</dd></dl>
</li>
</ul>
<a name="compactCleanUp(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compactCleanUp</h4>
<pre>public static&nbsp;void&nbsp;compactCleanUp(java.lang.String&nbsp;fileName)</pre>
<div class="block">Clean up if needed, in a case a compact operation was interrupted due to
 killing the process or a power failure. This will delete temporary files
 (if any), and in case atomic file replacements were not used, rename the
 new file.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fileName</code> - the file name</dd></dl>
</li>
</ul>
<a name="compact(java.lang.String, java.lang.String, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compact</h4>
<pre>public static&nbsp;void&nbsp;compact(java.lang.String&nbsp;sourceFileName,
           java.lang.String&nbsp;targetFileName,
           boolean&nbsp;compress)</pre>
<div class="block">Copy all live pages from the source store to the target store.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sourceFileName</code> - the name of the source store</dd><dd><code>targetFileName</code> - the name of the target store</dd><dd><code>compress</code> - whether to compress the data</dd></dl>
</li>
</ul>
<a name="compact(org.h2.mvstore.MVStore, org.h2.mvstore.MVStore)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compact</h4>
<pre>public static&nbsp;void&nbsp;compact(<a href="../../../org/h2/mvstore/MVStore.html" title="class in org.h2.mvstore">MVStore</a>&nbsp;source,
           <a href="../../../org/h2/mvstore/MVStore.html" title="class in org.h2.mvstore">MVStore</a>&nbsp;target)</pre>
<div class="block">Copy all live pages from the source store to the target store.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>source</code> - the source store</dd><dd><code>target</code> - the target store</dd></dl>
</li>
</ul>
<a name="repair(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>repair</h4>
<pre>public static&nbsp;void&nbsp;repair(java.lang.String&nbsp;fileName)</pre>
<div class="block">Repair a store by rolling back to the newest good version.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fileName</code> - the file name</dd></dl>
</li>
</ul>
<a name="rollback(java.lang.String, long, java.io.Writer)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>rollback</h4>
<pre>public static&nbsp;long&nbsp;rollback(java.lang.String&nbsp;fileName,
            long&nbsp;targetVersion,
            java.io.Writer&nbsp;writer)</pre>
<div class="block">Roll back to a given revision into a a file called *.temp.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fileName</code> - the file name</dd><dd><code>targetVersion</code> - the version to roll back to (Long.MAX_VALUE for the
            latest version)</dd><dd><code>writer</code> - the log writer</dd>
<dt><span class="strong">Returns:</span></dt><dd>the version rolled back to (-1 if no version)</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/h2/mvstore/MVStore.Builder.html" title="class in org.h2.mvstore"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/h2/mvstore/OffHeapStore.html" title="class in org.h2.mvstore"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/h2/mvstore/MVStoreTool.html" target="_top">Frames</a></li>
<li><a href="MVStoreTool.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
